 var FC_Coast = [
{name: "Isaac Gorelik", number: 1, goals: 0, assists:0, gp:4, town: "Weston"},
{name: "Joe Arnold", number: 2, goals: 1, assists:0, gp:3, town: "Natick"},
{name: "Daniel Ayash", number: 3, goals: 0, assists:0, gp:2, town: "Newton"},
{name: "Gehrig Dick", number: 4, goals: 0, assists:0, gp:2, town: "Needham"},
{name: "Daniel Yang", number: 5, goals: 0, assists:1, gp:3, town: "Sherborn"},
{name: "Alex Crystal", number: 6, goals: 7, assists:1, gp:5, town: "Newton"},
{name: "Harry Tuttle", number: 7, goals: 0, assists:0, gp:1, town: "Dedham"},
{name: "Malcom Macdonald", number: 9, goals: 0, assists:3, gp:5, town: "Dedham"},
{name: "Jonathan Ayash", number: 10, goals: 0, assists:0, gp:6, town: "Newton"},
{name: "Cam Collyer", number: 11, goals: 0, assists:0, gp:1, town: "Needham"},
{name: "Joe Spielmann", number: 13, goals: 0, assists:0, gp:1, town: "Needham"},
{name: "Liam Fidurko", number: 14, goals: 4, assists:2, gp:4, town: "Needham"},
{name: "Ben Yee", number: 15, goals: 1, assists:0, gp:1, town: "Needham"},
{name: "Eitan Joseph", number: 17, goals: 1, assists:5, gp:8, town: "Newton"},
{name: "Levi Shlyankevich", number: 19, goals: 0, assists:0, gp:4, town: "Newton"},
{name: "Greyson Lam", number: 20, goals: 0, assists:0, gp:3, town: "Natick"},
{name: "John Javaloyes", number: 21, goals: 7, assists:2, gp:5, town: "Newton"},
{name: "Ethan Hollop", number: 22, goals: 5, assists:6, gp:7, town: "Needham"},
{name: "Will Fox", number: 30, goals: 0, assists:1, gp:4, town: "West Roxbury"},
{name: "Jack Lane", number: 29, goals: 0, assists:0, gp:1, town: "Medfield"},
];

var SC_Dwarchi = [
{name: "Adam Iskandar", number: 23, goals: 0, assists:1, gp:2, town: "Newton"},
{name: "Bence Gyuris", number: 24, goals: 0, assists:0, gp:2, town: "Newton"},
{name: "Riley Kadis", number: 1, goals: 0, assists:0, gp:3, town: "Newton"},
{name: "Nick Duarte", number: 4, goals: 0, assists:1, gp:3, town: "Brockton"},
{name: "Ariel Sassoon", number: 25, goals: 0, assists:0, gp:2, town: "Newton"},
{name: "Christopher Brooks", number: 6, goals: 0, assists:1, gp:6, town: "Newton"},
{name: "Matt Salzman", number: 30, goals: 0, assists:0, gp:0, town: "Brookline"},
{name: "Gabe Applebaum", number: 8, goals: 0, assists:0, gp:3, town: "Newton"},
{name: "Jonathan Oliveira", number: 9, goals: 0, assists:0, gp:4, town: "Brockton"},
{name: "Randy Candy", number: 29, goals: 0, assists:0, gp:6, town: "Wilmington"},
{name: "Diego Canuto", number: 10, goals: 1, assists:0, gp:6, town: "Brockton"},
{name: "Marques Benton", number: 22, goals:0, assists:0, gp:2, town: "Newton"},
{name: "Gracian Moreira", number: 12, goals: 1, assists:4, gp:5, town: "Brockton"},
{name: "Zachriah Neville", number: 16, goals: 0, assists:0, gp:3, town: "Brockton"},
{name: "Jonathan Cohen", number: 14, goals: 4, assists:1, gp:2, town: "Newton"},
{name: "Ethan Ratnofsky", number: 26, goals: 0, assists:0, gp:0, town: "Newton"},
{name: "Jovan Edouarzin", number: 18, goals: 1, assists:2, gp:5, town: "Brockton"},
{name: "Tyler Best", number: 17, goals: 1, assists:1, gp:4, town: "Brockton"},
{name: "Marion Baptiste", number: 13, goals: 1, assists:2, gp:3, town: "Brockton"},
{name: "Surya Mani", number: 20, goals: 1, assists:0, gp:1, town: "Boxborough"},
{name: "George Gworek", number: 5, goals: 0, assists:0, gp:0, town: "Newton"},
{name: "Henry Lawrence", number: 11, goals: 1, assists:0, gp:3, town: "Brockton"},
{name: "Alex Davison", number: 27, goals: 0, assists:0, gp:2, town: "Newton"},
{name: "Oscar Rodas", number: 2, goals: 0, assists:0, gp:1, town: "Brookline"},
{name: "Tyler Duarte", number: 7, goals: 1, assists:0, gp:7, town: "Brockton"},
{name: "Ryon Hess", number: 28, goals: 4, assists:0, gp:2, town: "Bridgewater"},
{name: "Jake Cowan-Whitman", number: 21, goals: 0, assists:0, gp:3, town: "Newton"},
{name: "Andrea Hollop", number: 19, goals: 0, assists:0, gp:1, town: "Needham"},
];

var Rio_FC = [
{name: "Ben Lehv", number: 9, goals: 1, assists:0, gp:7},
{name: "Zach Herman", number: 7, goals: 2, assists:2, gp:3},
{name: "Rafael Eduards", number: 11, goals: 3, assists:2, gp:2},
{name: "Noah Savitz", number: 5, goals: 1, assists:0, gp:3},
{name: "Seamus Buckley", number: 20, goals: 0, assists:0, gp:3},
{name: "Jay Depina", number: 10, goals: 1, assists:0, gp:4},
{name: "Mac Porter", number: 17, goals: 2, assists:1, gp:3},
{name: "Ford Chope", number: 27, goals: 1, assists:5, gp:6},
{name: "Sean Murphy", number: 25, goals: 1, assists:0, gp:3},
{name: "Nick Caruso", number: 13, goals: 0, assists:0, gp:3},
{name: "Noah Krispin", number: 12, goals: 0, assists:0, gp:4},
{name: "Will Brown", number: 2, goals: 2, assists:3, gp:6},
{name: "Alex Ring", number: 6, goals: 0, assists:1, gp:2},
{name: "Jason Bryer", number: 3, goals: 1, assists:0, gp:1},
{name: "Jacob Calka", number: 8, goals: 0, assists:0, gp:2},
{name: "Scottie Irving", number: 4, goals: 0, assists:0, gp:1},
{name: "Nat Brown", number: 29, goals: 3, assists:0, gp:1},
{name: "Sallie Chope", number: 28, goals: 0, assists:0, gp:0},
{name: "Jayson Perez", number: 14, goals: 0, assists:0, gp:0},
{name: "Tommy Jordan", number: 15, goals: 0, assists:0, gp:0},
{name: "Ian Barney", number: 16, goals: 0, assists:0, gp:2},
{name: "Ben Iymburner-Jensen", number: 18, goals: 0, assists:0, gp:1},
{name: "Michael Wickwire", number: 19, goals: 0, assists:0, gp:1},
{name: "Luis Santos", number: 21, goals: 0, assists:1, gp:2},
{name: "Roberto Cucci", number: 22, goals: 0, assists:0, gp:2},
{name: "Eric Detjen", number: 30, goals: 0, assists:0, gp:1},
];


var Pickaxe_FC = [
{name: "Ellis O'Donnell", number: 3, goals: 1, assists:0, gp:4},
{name: "Sam Scher", number: 4, goals: 2, assists:1, gp:7}, 
{name: "Ethan Schaefer", number: 5, goals: 1, assists:4, gp:2},
{name: "Matteo Ascherio", number: 7, goals: 3, assists:0, gp:2},
{name: "Brad Saines", number: 10, goals: 2, assists:3, gp:4},
{name: "Mekhi Edge", number: 11, goals: 2, assists:0, gp:5},
{name: "Jake Sacks", number: 19, goals: 2, assists:2, gp:7},
{name: "Jorden Idehen", number: 24, goals: 1, assists:1, gp:2},
{name: "Noah Powell", number: 28, goals: 0, assists:1, gp:3},
{name: "Richie Fleming", number: 29, goals: 14, assists:4, gp:7},
{name: "Michael Carpenito", number: 1, goals: 0, assists:1, gp:4},
{name: "Maia Kramer", number: 9, goals: 2, assists:3, gp:3},
{name: "Jacob Orchard", number: 13, goals: 0, assists:1, gp:4},
{name: "Owen Smyth", number: 14, goals: 0, assists:0, gp:2},
{name: "Jonah Johnson", number: 15, goals: 0, assists:0, gp:0},
{name: "Avi Benmayor", number: 16, goals: 0, assists:0, gp:0},
];


var Golden_Siors_FC = [
{name: "Sam Denbow", number: 1, goals: 0, assists:1, gp:7, town: "Needham"},
{name: "Joe Palmatier", number: 2, goals: 0, assists:0, gp:1, town: "Needham"},
{name: "Michael Aksman", number: 3, goals: 9, assists:4, gp:6, town: "Needham"},
{name: "Jackson Meager", number: 4, goals: 0, assists:0, gp:1, town: "Needham"},
{name: "Alex Van Alphen", number: 6, goals: 1, assists:0, gp:2, town: "Needham"},
{name: "Will Popper", number: 7, goals: 1, assists:1, gp:5, town: "Needham"},
{name: "Donald Anastasi", number: 8, goals: 0, assists:0, gp:3, town: "Needham"},
{name: "Kyle Rayment", number: 9, goals: 0, assists:0, gp:0, town: "Needham"},
{name: "Henry Dodds", number: 10, goals: 0, assists:0, gp:3, town: "Needham"},
{name: "Ryan Fleming", number: 11, goals: 1, assists:1, gp:5, town: "Needham"},
{name: "Nick Miller", number: 12, goals: 0, assists:0, gp:0, town: "Needham"},
{name: "Ben Desmaires", number: 13, goals: 0, assists:2, gp:2, town: "Needham"},
{name: "Alex Berny", number: 14, goals: 0, assists:0, gp:0, town: "Needham"},
{name: "Will Cooper", number: 30, goals: 1, assists:0, gp:1, town: "Needham"},
{name: "Andrew McNally", number: 16, goals: 0, assists:1, gp:2, town: "Needham"},
{name: "Nate Cole", number: 17, goals: 2, assists:2, gp:3, town: "Needham"},
{name: "David Abdurakhmanov", number: 18, goals: 0, assists:0, gp:1, town: "Needham"},
{name: "Peter Dimeo", number: 19, goals: 3, assists:0, gp:2, town: "Needham"},
{name: "Peter Bannon", number: 20, goals: 0, assists:1, gp:1, town: "Needham"},
{name: "Vali Tenbrook", number: 21, goals: 0, assists:1, gp:1, town: "Needham"},
{name: "Artiom Taborim", number: 22, goals: 0, assists:0, gp:1, town: "Needham"},
];

all_teams = [FC_Coast, SC_Dwarchi, Rio_FC, Pickaxe_FC, Golden_Siors_FC]
team_names = ["FC Coast", "SC Dwarchi", "Rio FC", "Miners FC", "Golden Siors FC"]

function makeJSON(){
	finishSchedule()
	updateTeams(schedule)
	jsonObj = [];
	for (var i = 0; i < all_teams.length; i++) {
		teamObj = {
				team : team_names[i],
				players : [],
				record : getRecord(i)
				};

		for (var j = 0; j < all_teams[i].length; j++){
			player = all_teams[i][j];
			teamObj.players.push({
				name : player.name,
				number: player.number,
				ga : [player.goals, player.assists],
				town : player.town
			})
		}
		jsonObj.push(teamObj)
	}
	return jsonObj;
}




// --------- SCHEDULE ------


//schedule

var FCC = {name: "FC Coast", gp: 0, won: 0, drawn: 0, lost: 0, gf: 0, ga:0, gd: 0, points: 0};
var SCD = {name: "SC Dwarchi", gp: 0, won: 0, drawn: 0, lost: 0, gf: 0, ga:0, gd: 0, points: 0};
var PFC = {name: "Miners FC", gp: 0, won: 0, drawn: 0, lost: 0, gf: 0, ga:0, gd: 0, points: 0};
var RFC = {name: "Rio FC", gp: 0, won: 0, drawn: 0, lost: 0, gf: 0, ga:0, gd: 0, points: 0};
var GSFC = {name: "Golden Siors FC", gp: 0, won: 0, drawn: 0, lost: 0, gf: 0, ga:0, gd: 0, points: 0};
var SMFC = {name: "Ship Maturity FC", gp: 0, won: 0, drawn: 0, lost: 0, gf: 0, ga:0, gd: 0, points: 0};

all_records = [FCC, SCD, RFC, PFC, GSFC]

var schedule = [
{date: "6/28/18 6:30 pm", home: FCC, Hscore: 2, away: RFC, Ascore: 4, field: "Soule"},
{date: "7/3/18 6:30 pm", home: FCC, Hscore: 6, away: SCD, Ascore: 3, field: "Soule"},
{date: "7/10/18 6:30 pm", home: RFC, Hscore: 1, away: PFC, Ascore: 8, field: "Beaver"},
{date: "7/12/18 7:30 pm", home: SCD, Hscore: 4, away: RFC, Ascore: 4, field: "Soule"},
{date: "7/18/18 7:30 pm", home: SCD, Hscore: 3, away: PFC, Ascore: 5, field: "Soule"},
{date: "7/19/18 7:30 pm", home: GSFC, Hscore: 1, away: FCC, Ascore: 3, field: "Soule"},
{date: "7/23/18 7:30 pm", home: RFC, Hscore: 3, away: GSFC, Ascore: 2, field: "Soule"},
{date: "7/24/18 7:30 pm", home: PFC, Hscore: 4, away: GSFC, Ascore: 3, field: "Soule"},
{date: "7/26/18 7:30 pm", home: PFC, Hscore: 2, away: FCC, Ascore: 5, field: "Soule"},
{date: "7/27/18 7:30 pm", home: GSFC, Hscore: 4, away: SCD, Ascore: 3, field: "Soule"},
{date: "7/30/18 7:30 pm", home: GSFC, Hscore: 3, away: PFC, Ascore: 3, field: "Soule"},
{date: "7/31/18 7:30 pm", home: SCD, Hscore: 1, away: FCC, Ascore: 2, field: "Soule"},
{date: "8/2/18 7:30 pm", home: RFC, Hscore: 2, away: FCC, Ascore: 2, field: "Soule"},
];

//for onsite match report feature
function addToSchedule(date, home, Hscore, away, Ascore, field){
  schedule.push({date: date, home: home, Hscore: Hscore, away: away, Ascore: Ascore, field: field});
};

function finishSchedule(){
	//externally added code	
	
	var varr = "8/7/18 7:30 pm RFC 4 SCD 2 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);var varr = "8/9/18 7:30 pm GSFC 4 RFC 0 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);
	var varr = "8/10/18 7:30 pm PFC 8 SCD 1 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);var varr = "8/13/18 7:30 pm FCC 5 PFC 1 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);var varr = "8/14/18 Forfeited Match SCD 0 GSFC 3 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);var varr = "8/15/18 7:30 pm PFC 0 RFC 0 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);var varr = "8/17/18 7:20 pm FCC 1 GSFC 1 Soule";
	var arrayOfStrings = varr.split(" ");
	var date = arrayOfStrings[0] + " " + arrayOfStrings[1] + " " + arrayOfStrings[2];
	addToSchedule(date, eval(arrayOfStrings[3]), eval(arrayOfStrings[4]), eval(arrayOfStrings[5]), eval(arrayOfStrings[6]), arrayOfStrings[7]);
}

//updateTeams translates the schedule into proper statistical data for teams
function updateTeams(arr){
  
  for (var i = 0; i < arr.length; i++){
    arr[i].home.gp += 1;
    arr[i].away.gp += 1;
    
    if (arr[i].Hscore > arr[i].Ascore){
      arr[i].home.won += 1;
      arr[i].away.lost += 1;
      arr[i].home.points += 3;
    };
    if (arr[i].Ascore > arr[i].Hscore){
      arr[i].away.won += 1;
      arr[i].home.lost += 1;
      arr[i].away.points += 3;
    };
    if (arr[i].Hscore == arr[i].Ascore){
      arr[i].home.points += 1;
      arr[i].away.points += 1;
      arr[i].home.drawn += 1;
      arr[i].away.drawn += 1;
    };
    
    var goalDifferential = (arr[i].Hscore - arr[i].Ascore);
    arr[i].home.gf += arr[i].Hscore;
    arr[i].home.ga += arr[i].Ascore;
    arr[i].home.gd += goalDifferential;
    arr[i].away.gf += arr[i].Ascore;
    arr[i].away.ga += arr[i].Hscore;
    arr[i].away.gd -= goalDifferential;

  };
};

function getRecord(i){
	return {
		gp : all_records[i].gp,
		wins : all_records[i].won,
		draws : all_records[i].drawn,
		losses : all_records[i].lost,
		gf : all_records[i].gf,
		ga : all_records[i].ga,
		gd : all_records[i].gd,
		points : all_records[i].points
	}

}

// ----- output to JSON object file ----

var dictstring = JSON.stringify(makeJSON());
var fs = require('fs');
fs.writeFile("stats2018.json", dictstring, function(err, result) {
     if(err) console.log('error', err);
   });







